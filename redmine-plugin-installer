#!/bin/bash

DIR_NAME=(`awk -F, '{print $1}'< config/redmine-plugins.txt `)
DEST_NAME=(`awk -F, '{print $2}'< config/redmine-plugins.txt `)
URL_NAME=(`awk -F, '{print $3}'< config/redmine-plugins.txt `)

for (( i = 0; i < ${#DIR_NAME[@]}; ++i ))
do
  FILE_NAME=`echo ${URL_NAME[$i]} | sed -e "s/.*\/\(.*$\)/\1/"`
  EXT=`echo ${URL_NAME[$i]} | sed -e "s/.*\.\(.*$\)/\1/"`
  wget ${URL_NAME[$i]}
    case $EXT in 
    zip)
       yes | unzip $FILE_NAME
        ;;

    tgz|gz)
       tar zxvf $FILE_NAME
        ;;
    *)
        ;;
    esac
  rm -fr $INSTALL_DIR/vendor/plugins/${DIR_NAME[$i]}
  mv ${DIR_NAME[$i]} $INSTALL_DIR/vendor/plugins/${DEST_NAME[$i]}
  rm -f $FILE_NAME
done
